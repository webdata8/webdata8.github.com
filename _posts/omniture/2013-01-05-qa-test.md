---
layout: post
title: 如何和QA测试团队配合Omniture跟踪代码的检测
description:
heading: 如何和QA测试团队配合Omniture跟踪代码的检测
category: omniture
publish: true
published: true
datePublished: 2013-01-05T00:00:00.000Z
dateModified:
date: 2013-01-05
---

一般来说,Omniture的跟踪代码实施会比很多其他免费网站分析工具来得复杂，如果代码加错发布后导致数据失真的话，损失的可不是那些服务费用，而是失去了这些数据驱动商务的时间和机会了。所以，如果网站用Omniture来跟踪的话，肯定需要有专门的团队来协助这些代码的测试，这不仅是设计这些需求的产品经理或分析师，而更需要技术团队的QA部门。一般中大型的技术公司都会有测试工程师，所以Omniture在代码实施过程中，除了开发工程师的配合，QA测试工程师的代码检测工作也是一个重中之重的环节。相信，有使用过Omniture布局一些复杂跟踪需求的时候或多或少都会有发布不正确的跟踪代码的时候。当然，如果用GA其他工具的话，也是需要测试的，这样才能发布到实际站点上去。本文就来说说和QA工程师团队配合Omniture的跟踪代码测试的一些经历。

QA工程师会问这三个最常见的问题：

>1.针对这个项目的所有页面，是不是都有添加Omniture跟踪代码包呢？
2.针对每个页面，他们的s.pagename是不是都和需求设计中变量指的正确无误呢？经过一次测试例子之后，数据是否有传到Omniture的服务器呢？
3.这些测试例子传过去之后，如何到对应的报表包看数据是否存在呢？

对于第一个问题，一般来说，中大型网站从代码和内容的严谨性和安全来说，会有本地站点，测试站点，CM测试站点，真实站点。所以，Omniture报表里面必须至少要有这4套报表包。举例来说，就是本地站点会有一个名字叫做s_code_dev.js 的Omniture总跟踪代码文件，测试站点有一个s_code_qa.js Omniture总跟踪代码文件，以此类推。所以QA在对每一个Omniture跟踪代码需求就要先检查下页面的JS跟踪文件是否加在正确的环境里面。当然，QA工程师的工具和测试方法有很多种，这里我们就暂时不考虑了。其次，他们在浏览页面的时候还要看该页面是否有Omniture SiteCatalyst代码，可以用火狐的WASP插件等。

第二个问题，s.pagename的准确性和自定义变量的准确性。这时候就要通过Debug工具了。当然到一个页面的时候，点击Debug工具就会显示出来Omniture的数据情况，只要看到pagename这一行就可以了。其次对于一些变量s.channel也可以看得到。在《如何和技术团队配合Omniture跟踪代码的实施》就有介绍这个Debug工具。

对于自定义变量的测试会比较麻烦些。比如某一个数据跟踪的需求是想知道，用户通过在填单页面成功到报价页面的个人信息，比如年龄，性别，地域，是否是在校学生，是否是登录用户，填单的成功性。这时候可以通过s.prop和s.eVar和s.event来填充变量。比如QA工程师就会在可以通过URL?scampaignid=合作伙伴（想想为什么要这样）访问填单页面，然后选择出生年月年龄，性别，地域城市等，然后页面将载入下一个页面报价页面，然后同Debug在报价页面查看，就会看到年龄参数s.prop1=”58″,s.eVar1=”58″，性别参数s.prop2=”f”,s.eVar2=”f”，匿名登陆用户判断参数s.prop3=”n”,s.eVar3=”n”，同时还有成功填单的事件跟踪s.events=”event5,event6:XX”;所以只要通过官方的Debug工具可以看到这些数据的显示，就可以认为数据传过去了，当然比较稳当的做法是看看页面的源代码，同时也可以看看Non-JS的代码。不过，成熟的QA系统都会内部的测试工具去自动化地跑这些页面的。这个就因公司和网站而异了。

第三个问题是要检查测试完的实例是否有传送到Omniture的报告当中。这个自然而然，需要Omniture管理员给QA部门开设一个通用的账号，让他们有权限可以访问测试站点的报表包。这里举一个典型的例子：当我们在跟踪一些锚点链接，Popup，或者input按钮的时候，在Omniture的数据采集手段里面一般会在用自定义链接的设置方法，有时候也可以用某一个s.prop来传递（往往在SiteCatalyst收集那些没有目标页面的链接都会采取自定义链接来实施跟踪代码，有时候也用于跟踪出站和PDF文件下载）。假设某一个流量很多的页面有2处新设计的功能，一个是帮我挑产品的JS弹窗，一个是产品品牌信息的popup，那么程序员会添加onclick=”s.tl(this,’o’,’New:Help Me’);”给第一个链接，onclick=”s.tl(this,’o’,’New:Brand Info’);”，那么测试人员就可以直接点击这些链接，然后到后台的报表去看看有没有实例产生。但一般来说，我都会建议QA测试人员采用Firebug直接在这些链接的代码修改并做个记号，比如将onclick=”s.tl(this,’o’,’Help Me’);”改为onclick=”s.tl(this,’o’,’New:Help MeQA111′);”，然后当你在点击后，在Omniture的Custom Links报告里面看到有指定的值传过去就可以了。之所以价格QA111就是为了做记号，保证这个实例是真实有效的。

<amp-img src="/assets/img/post/qa.png" width="706" height="160"></amp-img>

以上是和测试工程师配合的时候遇到的一些体会，除此之外，QA工程师还需要帮助开发工程师测试在这次数据跟踪需求项目中，逻辑是否准确，是否有对之前的代码进行覆盖，是否会影响其他产品线等，这个会更复杂些，也属于测试领域的专业范畴，这里就不讨论了。

注：所有文章及图片版权归网站数据吧（WebData8.com）所有。转载请注明出处“<a href="/">Webdata8网站分析</a>”。
